schema: '2.0'
stages:
  download_data:
    cmd: mkdir download; cd download/; wget -r https://clowder.edap-cluster.com/api/datasets/6148a429e4b0b85abf323988/download;
      mv clowder.edap-cluster.com/api/datasets/6148a429e4b0b85abf323988/download download.zip;
      rm -r clowder.edap-cluster.com; unzip download.zip; rm download.zip; unzip INVITRODB_V3_4_LEVEL5.zip;
      rm INVITRODB_V3_4_LEVEL5.zip
    outs:
    - path: download/
      md5: c0a5c6140cf0ec0efbb7bfaa84db2ef6.dir
      size: 2359233639
      nfiles: 21
  build_data:
    cmd: Rscript R/build.R
    deps:
    - path: download/
      md5: c0a5c6140cf0ec0efbb7bfaa84db2ef6.dir
      size: 2359233639
      nfiles: 21
    outs:
    - path: data/
      md5: df1abb8a56f7916d2d5cdbfa60fc0115.dir
      size: 706944770
      nfiles: 21
  download:
    cmd: bash stages/1_download.sh
    deps:
    - path: download/chemical-lists-2022-11-17.csv
      md5: cf6742e84206e490110fa15da18ee38d
      size: 315332
    - path: download/list_chemicals
      md5: 6a355d3c02da7761ef75da11f4445849.dir
      size: 557228971
      nfiles: 416
    - path: stages/1_download.sh
      md5: 003bfc3371113746ac1b52bb659a939c
      size: 1803
    - path: stages/check_listofchemicals.py
      md5: 97b67914de4885eed3eaa4388b1a918a
      size: 1563
    outs:
    - path: download/DSSTox_Identifiers.csv
      md5: f08a55626acece0f8ca9598801a8bfa0
      size: 206993176
  build:
    cmd: bash stages/2_build.sh
    deps:
    - path: download
      md5: d30ce46f49781669b68f28417c3ced21.dir
      size: 961002761
      nfiles: 419
    - path: stages/2_build.sh
      md5: b979dc407a5ff08264df8f376bac37a8
      size: 435
    - path: stages/csv2parquet.py
      md5: d911282cd61a5fb266b3fd58c05be902
      size: 1412
    outs:
    - path: brick
      md5: df230e9c2a00007dcdd43785725387ac.dir
      size: 392643880
      nfiles: 418
