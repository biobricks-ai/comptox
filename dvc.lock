schema: '2.0'
stages:
  download_data:
    cmd: mkdir download; cd download/; wget -r https://clowder.edap-cluster.com/api/datasets/6148a429e4b0b85abf323988/download;
      mv clowder.edap-cluster.com/api/datasets/6148a429e4b0b85abf323988/download download.zip;
      rm -r clowder.edap-cluster.com; unzip download.zip; rm download.zip; unzip INVITRODB_V3_4_LEVEL5.zip;
      rm INVITRODB_V3_4_LEVEL5.zip
    outs:
    - path: download/
      md5: c0a5c6140cf0ec0efbb7bfaa84db2ef6.dir
      size: 2359233639
      nfiles: 21
  build_data:
    cmd: Rscript R/build.R
    deps:
    - path: download/
      md5: c0a5c6140cf0ec0efbb7bfaa84db2ef6.dir
      size: 2359233639
      nfiles: 21
    outs:
    - path: data/
      md5: df1abb8a56f7916d2d5cdbfa60fc0115.dir
      size: 706944770
      nfiles: 21
  download:
    cmd: Rscript stages/1_download.R
    deps:
    - path: https://clowder.edap-cluster.com/datasets/61147fefe4b0856fdc65639b#folderId=61148181e4b0856fdc65643f&page=0
      checksum: '148296144780748777460904526843501580158'
      size: 66044
    - path: stages/1_download.R
      md5: 55122c7d3c8694d263d2edd30444dd56
      size: 589
    outs:
    - path: brick/dsstox_identifiers.parquet
      md5: 809dbe80c184ceed49eeb2b00d4de748
      size: 109605000
  build:
    cmd: bash stages/2_build.sh
    deps:
    - path: download
      md5: d30ce46f49781669b68f28417c3ced21.dir
      size: 961002761
      nfiles: 419
    - path: stages/2_build.sh
      md5: b979dc407a5ff08264df8f376bac37a8
      size: 435
    - path: stages/csv2parquet.py
      md5: d911282cd61a5fb266b3fd58c05be902
      size: 1412
    outs:
    - path: brick
      md5: df230e9c2a00007dcdd43785725387ac.dir
      size: 392643880
      nfiles: 418
